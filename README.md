# AI Brief Refiner

Telegram-бот для трансформации размытых клиентских запросов в структурированные технические задания. Автоматизирует процесс сбора требований через управляемый диалог с использованием LLM и RAG.

Продукт решает реальную бизнес-проблему: клиенты часто приходят с запросами вида "сделайте мне сайт" или "нужно приложение", не понимая, какая информация нужна для оценки и реализации. Бот выступает интеллектуальным посредником, который задаёт правильные вопросы, выявляет скрытые требования и формирует готовое ТЗ.

---

## Ключевые возможности

- **Пошаговый сбор брифа** — структурированный диалог с inline-кнопками для быстрого выбора типа проекта, платформы, сроков и бюджета
- **Prompt orchestration** — система промптов для анализа запроса, генерации уточняющих вопросов и формирования финального ТЗ
- **Автоматический RAG** — бот сам определяет, когда нужно обратиться к базе знаний (best practices, чек-листы, типичные ошибки)
- **Telegram-native UX** — inline-клавиатуры, меню команд, документы как вложения
- **Разделение ролей** — пользовательские и административные команды с разными уровнями доступа
- **Генерация документа** — финальное ТЗ отправляется как .docx файл

---

## Как это работает

1. Пользователь запускает `/new` и выбирает тип проекта через inline-кнопки
2. Бот последовательно собирает: платформу, сроки, бюджет, цели, функционал
3. На каждом шаге LLM анализирует ответы и задаёт уточняющие вопросы
4. `/summary` показывает текущий черновик ТЗ
5. `/final` генерирует структурированный документ и отправляет его пользователю

Весь процесс занимает 3-5 минут и заменяет часовые созвоны по сбору требований.

---

## Технологический стек

| Компонент | Технология |
|-----------|------------|
| Язык | Python 3.10+ |
| Telegram API | aiogram 3.x |
| LLM | OpenAI API (GPT-4) |
| Векторное хранилище | ChromaDB |
| RAG | Sentence embeddings + semantic search |
| Генерация документов | python-docx |
| Контейнеризация | Docker, Docker Compose |

---

## Команды пользователя

| Команда | Описание |
|---------|----------|
| `/start` | Запуск бота и приветствие |
| `/new` | Начать новый бриф |
| `/summary` | Показать текущий черновик ТЗ |
| `/final` | Сформировать и получить ТЗ документом |
| `/cancel` | Отменить текущий бриф |
| `/help` | Справка по использованию |

---

## Команды администратора

| Команда | Описание |
|---------|----------|
| `/index` | Индексация документов в RAG базу |
| `/stats` | Статистика базы знаний |

Административные команды доступны только пользователям из списка `ADMIN_IDS`.

---

## Результат работы

Пользователь получает .docx документ со структурированным ТЗ:

```
ТЕХНИЧЕСКОЕ ЗАДАНИЕ
===================

Тип проекта: Интернет-магазин
Платформа: Web + Mobile (PWA)
Сроки: 2-4 недели
Бюджет: Средний

ЦЕЛЬ ПРОЕКТА
Создание онлайн-магазина для продажи handmade украшений...

ОБЯЗАТЕЛЬНЫЙ ФУНКЦИОНАЛ
- Каталог с фильтрацией по категориям
- Корзина и оформление заказа
- Интеграция с платёжной системой
...

РИСКИ И РЕКОМЕНДАЦИИ
⚠️ Интеграция с платёжными системами требует сертификации PCI DSS
```

Документ готов для передачи разработчикам или использования в оценке проекта.

---

## Установка и запуск

### 1. Клонирование репозитория

```bash
git clone https://github.com/your-username/ai-brief-refiner.git
cd ai-brief-refiner
```

### 2. Настройка переменных окружения

```bash
cp .env.example .env
```

Заполните `.env`:
```
TELEGRAM_BOT_TOKEN=your_bot_token
OPENAI_API_KEY=your_openai_key
ADMIN_IDS=123456789
```

### 3. Запуск через Docker

```bash
docker-compose up -d
```

Или локально:
```bash
pip install -r requirements.txt
python main.py
```

---

## Архитектура проекта

```
bot/
├── main.py                 # Точка входа, handlers
├── config.py               # Конфигурация
├── services/
│   ├── openai_client.py    # Взаимодействие с OpenAI API
│   ├── brief_session.py    # Управление сессией брифа
│   ├── tz_document.py      # Генерация .docx
│   ├── bot_commands.py     # Регистрация команд Telegram
│   └── router.py           # Роутинг сообщений
├── rag/
│   ├── vectorstore.py      # ChromaDB wrapper
│   ├── indexer.py          # Индексация документов
│   └── auto_rag.py         # Автоматическое определение RAG-запросов
├── utils/
│   ├── prompts.py          # Системные промпты
│   ├── keyboards.py        # Inline-клавиатуры
│   └── helpers.py          # Вспомогательные функции
└── data/                   # Документы для RAG
```

---

## Статус проекта

Production-ready MVP. Бот полностью функционален и готов к использованию. Развитие продолжается.

---

## Автор

**Kamila Urmanova**  
Junior Prompt Engineer / AI Assistant Developer

- Проектирование диалоговых систем на базе LLM
- Разработка Telegram-ботов с продуктовым подходом
- Prompt engineering и RAG-системы
